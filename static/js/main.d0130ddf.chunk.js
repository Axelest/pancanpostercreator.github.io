(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{277:function(e,t,a){e.exports=a(37)},286:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(78),s=a.n(o),i=a(19),c=a(20),l=a(22),u=a(21),m=a(23),p=a(10),d=a(485),h=a(25),g=a(494),f="SET_LAYOUT",v="SET_LANGUAGE",b="SET_IMAGE",E="SET_LOGO",y="SET_MESSAGE",w="SET_TITLE",O="SET_STEP",k="SET_THEME",j="POSTER_CREATE",S="POSTER_SCALE",I="IMAGE_SET_POSITION",x=function(e){return{type:"LAYOUT_SET",payload:e}},C=function(e){return{type:"LANGUAGE_SET",payload:{language:e}}},T=function(e){return{type:"STEP_SET",payload:{step:e}}},L=function(e){return{type:"THEME_SET",payload:{theme:e}}},N=function(e){return{type:"IMAGE_SET",payload:{image:e}}},M=function(e){return{type:"LOGO_SET",payload:{logo:e}}},U=function(e){return{type:"MESSAGE_SET",payload:{message:e}}},A=function(e){return{type:"POSTER_CREATE_SUCCESS",payload:{posterImage:e}}},H=function(e){return{type:"SCALE_SET",payload:{scale:e}}},P=function(e){return{type:"TITLE_SET",payload:{title:e}}},R=function(e,t){return{type:"IMAGE_POSITION_SET",payload:{positionX:e,positionY:t}}},B=(a(286),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mouseMoving:!1,element:""},a.moving=a.moving.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.element=document.getElementById("preview-vertical"),this.state.element.addEventListener("mousedown",function(){return e.state.element.addEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("mouseup",function(){return e.state.element.removeEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("touchmove",this.moving)}},{key:"componentWillUnmount",value:function(){this.state.element.removeEventListener("mousedown",this.moving,!1),this.state.element.removeEventListener("mouseup",this.moving,!1),this.state.element.removeEventListener("touchmove",this.moving,!1)}},{key:"moving",value:function(e){this.setState({mouseMoving:!this.state.mouseMoving});var t=this.props.setImagePosition;if("touchmove"===e.type){var a=e.changedTouches[0];return t(a.clientX-this.state.element.getBoundingClientRect().left-this.state.element.offsetWidth/2,a.clientY-this.state.element.getBoundingClientRect().top-this.state.element.offsetHeight/2)}return t(e.offsetX-this.state.element.offsetWidth/2,e.offsetY-this.state.element.offsetHeight/2)}},{key:"render",value:function(){var e=this.props.poster,t=e.image;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"preview-vertical"},r.a.createElement("div",{id:"preview-vertical",className:"image-half",style:{backgroundImage:"url( "+t+" )",backgroundSize:"1"===e.scale||1===e.scale?"cover":20*e.scale+150+"%",backgroundPosition:0===e.positionX&&0===e.positionY?"center":-e.positionX+"% "+e.positionY+"px"}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-holder"},r.a.createElement("span",null,"Moments Matter"),r.a.createElement("img",{src:"pancan-logo.png",alt:""})))),r.a.createElement("div",{className:"body-copy"},r.a.createElement(g.a,{as:"h2",className:"title",textAlign:"center",content:e.title}),r.a.createElement("p",{className:"content"},e.message))),r.a.createElement("div",{className:"final-vertical",id:"final-vertical"},r.a.createElement("div",{className:"image-half",style:{backgroundImage:"url( "+t+" )",backgroundSize:"1"===e.scale||1===e.scale?"cover":20*e.scale+150+"%",backgroundPosition:0===e.positionX&&0===e.positionY?"center":-e.positionX+"% "+e.positionY+"px"}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-holder"},r.a.createElement("div",{className:"white-drop"}),r.a.createElement("span",null,"Moments Matter"),r.a.createElement("img",{src:"pancan-logo.png",alt:""})))),r.a.createElement("div",{className:"body-copy"},r.a.createElement("h2",{className:"title"},e.title),r.a.createElement("p",{className:"content"},e.message))))}}]),t}(n.Component)),_=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setImagePosition:function(t,a){return e({type:I,payload:{x:t,y:a}})}}})(B),z=a(495),W=(a(370),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mouseMoving:!1,element:""},a.moving=a.moving.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.element=document.getElementById("preview-horizontal"),this.state.element.addEventListener("mousedown",function(){return e.state.element.addEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("mouseup",function(){return e.state.element.removeEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("touchmove",this.moving)}},{key:"componentWillUnmount",value:function(){this.state.element.removeEventListener("mousedown",this.moving,!1),this.state.element.removeEventListener("mouseup",this.moving,!1),this.state.element.removeEventListener("touchmove",this.moving,!1)}},{key:"moving",value:function(e){this.setState({mouseMoving:!this.state.mouseMoving});var t=this.props.setImagePosition;if("touchmove"===e.type){var a=e.changedTouches[0];return t(a.clientX-this.state.element.getBoundingClientRect().left-this.state.element.offsetWidth/2,a.clientY-this.state.element.getBoundingClientRect().top-this.state.element.offsetHeight/2)}return t(e.offsetX-this.state.element.offsetWidth/2,e.offsetY-this.state.element.offsetHeight/2)}},{key:"render",value:function(){var e=this.props.poster,t=e.image;return r.a.createElement("div",null,r.a.createElement(z.a,{columns:2,className:"preview-horizontal"},r.a.createElement(z.a.Column,{id:"preview-horizontal",className:"image-half",style:{backgroundImage:"url( "+t+" )",backgroundSize:"1"===e.scale||1===e.scale?"cover":20*e.scale+150+"%",backgroundPosition:0===e.positionX&&0===e.positionY?"center":e.positionX+"% "+e.positionY+"px"}}),r.a.createElement(z.a.Column,{className:"text-half"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-holder"},r.a.createElement("span",null,"Moments Matter"),r.a.createElement("img",{src:"pancan-logo.png",alt:""}))),r.a.createElement(g.a,{as:"h2",className:"title",textAlign:"left",content:e.title}),r.a.createElement("p",{className:"content"},e.message))),r.a.createElement(z.a,{columns:2,id:"final-horizontal"},r.a.createElement(z.a.Column,{className:"image",style:{backgroundImage:"url( "+t+" )",backgroundSize:"1"===e.scale||1===e.scale?"cover":20*e.scale+150+"%",backgroundPosition:0===e.positionX&&0===e.positionY?"center":e.positionX+"% "+e.positionY+"px"}}),r.a.createElement(z.a.Column,{className:"body-text"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-holder"},r.a.createElement("span",null,"Moments Matter"),r.a.createElement("img",{src:"pancan-logo.png",alt:""}))),r.a.createElement(g.a,{as:"h2",className:"title",content:e.title}),r.a.createElement("p",{className:"content"},e.message))))}}]),t}(n.Component)),Y=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setImagePosition:function(t,a){return e({type:I,payload:{x:t,y:a}})}}})(W),G=(a(375),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mouseMoving:!1,element:""},a.moving=a.moving.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.element=document.getElementById("preview-square"),this.state.element.addEventListener("mousedown",function(){return e.state.element.addEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("mouseup",function(){return e.state.element.removeEventListener("mousemove",e.moving,!1)}),this.state.element.addEventListener("touchmove",this.moving)}},{key:"componentWillUnmount",value:function(){this.state.element.removeEventListener("mousedown",this.moving,!1),this.state.element.removeEventListener("mouseup",this.moving,!1),this.state.element.removeEventListener("touchmove",this.moving,!1)}},{key:"moving",value:function(e){this.setState({mouseMoving:!this.state.mouseMoving});var t=this.props.setImagePosition;if("touchmove"===e.type){var a=e.changedTouches[0];return t(a.clientX-this.state.element.getBoundingClientRect().left-this.state.element.offsetWidth/2,a.clientY-this.state.element.getBoundingClientRect().top-this.state.element.offsetHeight/2)}return t(e.offsetX-this.state.element.offsetWidth/2,e.offsetY-this.state.element.offsetHeight/2)}},{key:"render",value:function(){var e=this.props.poster,t=e.image;return r.a.createElement("div",{id:"preview-square",className:"preview-square poster-preview-holder image-half",style:{backgroundImage:"url( "+t+" )",backgroundSize:"1"===e.scale||1===e.scale?"cover":20*e.scale+150+"%",backgroundPosition:0===e.positionX&&0===e.positionY?"center":e.positionX+"px "+e.positionY+"px"}},r.a.createElement("div",null),r.a.createElement("p",{className:"message-holder"},e.message),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"logo-holder"},r.a.createElement("span",null,"Moments Matter"),r.a.createElement("img",{src:"pancan-logo.png",alt:""}))))}}]),t}(n.Component)),D=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setImagePosition:function(t,a){return e({type:I,payload:{x:t,y:a}})}}})(G),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).renderPreview=a.renderPreview.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderPreview",value:function(){switch(this.props.poster.layoutType){case 1:return r.a.createElement(D,null);case 2:return r.a.createElement(Y,null);case 3:return r.a.createElement(_,null);default:return console.log("invalid layout type")}}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"preview-container"},r.a.createElement("div",{id:"final-poster"},this.renderPreview()))}}]),t}(n.Component),F=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},null)(X),q=a(492),J=a(38),V=a(493),$=a(34),K=a(496),Q=a(491),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).layoutHandler=a.layoutHandler.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"layoutHandler",value:function(e){(0,this.props.setLayout)(e)}},{key:"render",value:function(){var e=this,t=this.props.poster;return r.a.createElement("div",{className:"step-card paddingTop"},r.a.createElement(g.a,{as:"h2",className:"text-center poster-h2"},"Choose your layout"),r.a.createElement(z.a,{centered:!0,columns:3},r.a.createElement(z.a.Column,{computer:5,mobile:10,tablet:5,textAlign:"center",className:"poster message only"===t.type?"active layout-selector":"layout-selector ",onClick:function(){return e.layoutHandler("poster message only")}},r.a.createElement(K.a,{raised:!0},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Paragraph,null,r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"})))),r.a.createElement("p",{className:"center layout-type-text"},"Square\xa0",r.a.createElement("br",null),"(Short message only)")),r.a.createElement(z.a.Column,{computer:7,mobile:16,tablet:7,textAlign:"center",className:"poster message and image"===t.type?"active layout-selector":"layout-selector",onClick:function(){return e.layoutHandler("poster message and image")}},r.a.createElement(K.a,{raised:!0},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Header,{image:!0},r.a.createElement(Q.a.Line,null),r.a.createElement(Q.a.Line,null)),r.a.createElement(Q.a.Paragraph,null,r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"})))),r.a.createElement("p",{className:"center layout-type-text"},"Horizontal\xa0",r.a.createElement("br",null),"(Share your story)")),r.a.createElement(z.a.Column,{computer:4,mobile:8,tablet:4,textAlign:"center",className:"post message only"===t.type?"active layout-selector":"layout-selector",onClick:function(){return e.layoutHandler("post message only")}},r.a.createElement(K.a,{raised:!0},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Paragraph,null,r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"}),r.a.createElement(Q.a.Line,{length:"short"}),r.a.createElement(Q.a.Line,{length:"medium"})))),r.a.createElement("p",{className:"center layout-type-text"},"Vertical\xa0",r.a.createElement("br",null),"(Share your story)"))))}}]),t}(n.Component),ee=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setLayout:function(t){return e({type:f,payload:t})}}})(Z),te=a(487),ae=a(489),ne=a(488),re=a(53),oe=a.n(re),se=a(70),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={width:400,height:0,streaming:!1,video:null,canvas:null,startbutton:null,ready:!1,stream:null,isMobile:!1},a.startup=a.startup.bind(Object(p.a)(a)),a.clearPhoto=a.clearPhoto.bind(Object(p.a)(a)),a.startStream=a.startStream.bind(Object(p.a)(a)),a.makeBlob=a.makeBlob.bind(Object(p.a)(a)),a.stopStream=a.stopStream.bind(Object(p.a)(a)),a.isMobile=a.isMobile.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.startup(),this.isMobile()}},{key:"isMobile",value:function(){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?this.setState({isMobile:!0}):this.setState({isMobile:!1})}},{key:"startup",value:function(){var e=Object(se.a)(oe.a.mark(function e(){var t=this;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({video:document.getElementById("video-stream"),canvas:document.getElementById("image-canvas"),startbutton:document.getElementById("takepicture")});case 2:this.state.video.addEventListener("canplay",function(e){t.state.streaming||(t.state.height=t.state.video.videoHeight/(t.state.video.videoWidth/t.state.width),t.state.video.setAttribute("width",t.state.width),t.state.video.setAttribute("height",t.state.height),t.state.canvas.setAttribute("width",t.state.width),t.state.canvas.setAttribute("height",t.state.height),t.state.streaming=!0,t.forceUpdate())},!1);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startStream",value:function(){var e=this;if(this.state.ready){var t=this.props.setImage,a=this.state.canvas.getContext("2d");if(this.state.width&&this.state.height){this.state.canvas.width=this.state.width,this.state.canvas.height=this.state.height,a.drawImage(this.state.video,0,0,this.state.width,this.state.height);var n=this.state.canvas.toDataURL("image/jpeg");t(this.makeBlob(n)),this.forceUpdate(),this.stopStream()}}else{document.getElementById("camera-stream").style.display="block",navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){e.state.video.srcObject=t,e.state.video.play(),e.setState({ready:!0,stream:t})}).catch(function(e){return console.log("cannot open stream: ",e)})}}},{key:"clearPhoto",value:function(){(0,this.props.setImage)(null)}},{key:"stopStream",value:function(){document.getElementById("camera-stream").style.display="none",this.state.stream.getTracks().forEach(function(e){return e.stop()}),this.setState({ready:!1,stream:null})}},{key:"makeBlob",value:function(e){var t="";t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return URL.createObjectURL(new Blob([n],{type:a}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"camera",id:"camera-stream",style:{display:"none"}},r.a.createElement("video",{id:"video-stream"})),r.a.createElement(V.a,{disabled:this.state.isMobile,color:"green",onClick:this.startStream},"Take photo"),this.state.ready?r.a.createElement("span",null,r.a.createElement(V.a,{color:"orange",onClick:this.clearPhoto},"Clear photo"),r.a.createElement(V.a,{color:"red",onClick:this.stopStream},"Cancel")):"",r.a.createElement("canvas",{id:"image-canvas",style:{display:"none"}}))}}]),t}(n.Component),ce=Object(h.b)(function(e){return{poster:e.rootReducer}},function(e){return{setImage:function(t){return e({type:b,path:t})}}})(ie),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messageType:1,error:{message:"",active:!1},zoom:1},a.themeImage=a.themeImage.bind(Object(p.a)(a)),a.selectorHandler=a.selectorHandler.bind(Object(p.a)(a)),a.changeHandler=a.changeHandler.bind(Object(p.a)(a)),a.logoHandler=a.logoHandler.bind(Object(p.a)(a)),a.zoomChange=a.zoomChange.bind(Object(p.a)(a)),a.startStream=a.startStream.bind(Object(p.a)(a)),a.titleChangeHandler=a.titleChangeHandler.bind(Object(p.a)(a)),a.findImageOrientation=a.findImageOrientation.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"findImageOrientation",value:function(e,t){(0,this.props.setImage)(e,t)}},{key:"themeImage",value:function(e){var t=e.target.files[0];if(t.size>5242880)return console.log("Image way to big"),this.setState({error:{message:"File is way to big...",active:!0}});!function(e,t){var a=new FileReader,n=document.createElement("canvas"),r=n.getContext("2d"),o=new Image;a.onload=function(a){if(a.target){var s=a.target,i=new DataView(s.result);if(o.src=URL.createObjectURL(e),65496!==i.getUint16(0,!1))return t(-2,o.src);for(var c=i.byteLength,l=2;l<c;){if(i.getUint16(l+2,!1)<=8)return t(-1,o.src);var u=i.getUint16(l,!1);if(l+=2,65505===u){if(1165519206!==i.getUint32(l+=2,!1))return t(-1,o.src);var m=18761==i.getUint16(l+=6,!1);l+=i.getUint32(l+4,m);var p=i.getUint16(l,m);l+=2;for(var d=0;d<p;d++)if(274==i.getUint16(l+12*d,m)){var h=function(){var e=i.getUint16(l+12*d+8,m);return o.onload=function(){switch(n.width=o.width,n.height=o.height,r.save(),r.translate(o.width/2,o.height/2),e){case 1:return r.rotate(360*Math.PI/180),r.drawImage(o,-o.width/2,-o.height/2),r.restore(),t(e,n.toDataURL());case 8:return r.rotate(270*Math.PI/180),r.drawImage(o,-o.width/2,-o.height/2),r.restore(),t(e,n.toDataURL());case 3:return r.rotate(180*Math.PI/180),r.drawImage(o,-o.width/2,-o.height/2),r.restore(),t(e,n.toDataURL());case 6:return r.rotate(90*Math.PI/180),r.drawImage(o,-o.width/2,-o.height/2),r.restore(),t(e,n.toDataURL());default:return t(e,"nothing here")}},{v:t(e)}}();if("object"===typeof h)return h.v}}else{if(65280!=(65280&u))break;l+=i.getUint16(l,!1)}}return t(-1,o.src)}},a.readAsArrayBuffer(e)}(t,this.findImageOrientation)}},{key:"selectorHandler",value:function(e){(0,this.props.setMessage)(e)}},{key:"titleChangeHandler",value:function(e){(0,this.props.setTitle)(e.target.value)}},{key:"changeHandler",value:function(e){(0,this.props.setMessage)(e.target.value)}},{key:"logoHandler",value:function(e){var t=this.props.setLogo,a=e.target.files[0],n=URL.createObjectURL(a);if(a.size>5242880)return this.setState({error:{message:"File is way to big...",active:!0}});t(a,n)}},{key:"zoomChange",value:function(e,t){t.name;var a=t.value,n=this.props.setSize;this.setState({zoom:a}),n(a)}},{key:"startStream",value:function(){console.log("will start camera streaming here")}},{key:"render",value:function(){var e=this.props.poster;return r.a.createElement(d.a,{textAlign:"center"},r.a.createElement(g.a,{as:"h2",className:"text-center poster-h2"},"Upload your image"),r.a.createElement(te.a,{icon:"file",iconPosition:"left",placeholder:"Upload Image",accept:"image/*",type:"file",onChange:this.themeImage}),r.a.createElement("p",null,"10 MB limit. Allowed types: gif png jpg jpeg."),r.a.createElement(g.a,{as:"h2",className:"text-center poster-h2 take-picture"},"Take a picture"),r.a.createElement("div",{className:"take-picture"},r.a.createElement(ce,null)),r.a.createElement(ae.a.Input,{label:"Scale image: ",min:1,max:10,name:"zoom",onChange:this.zoomChange,type:"range",value:this.state.zoom,className:"scale-controller"}),r.a.createElement(g.a,{as:"h2",textAlign:"center",className:"text-center poster-h2"},"Share Your Moment"),r.a.createElement(ae.a,null,r.a.createElement(te.a,{className:1===e.layoutType?"hide":"show paddingBottom",placeholder:"Poster title",type:"text",onChange:this.titleChangeHandler,defaultValue:e.title,maxLength:"35"}),r.a.createElement(ne.a,{placeholder:"Write 'I am and will' message here. eg. 'I am a student and I will spread the word'.",maxLength:"150",onChange:this.changeHandler,defaultValue:e.message}),r.a.createElement("p",null,"Maximum 150 characters")))}}]),t}(n.Component),ue=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setImage:function(t,a){return e({type:b,payload:t,path:a})},setLogo:function(t,a){return e({type:E,payload:t,path:a})},setMessage:function(t){return e({type:y,payload:t})},setSize:function(t){return e({type:S,payload:t})},setTitle:function(t){return e({type:w,payload:t})}}})(le),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).renderStep=a.renderStep.bind(Object(p.a)(a)),a.langHandler=a.langHandler.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"langHandler",value:function(e){(0,this.props.setLanguage)(e)}},{key:"renderStep",value:function(e){return r.a.createElement(ue,null)}},{key:"render",value:function(){var e=this.props.poster;return r.a.createElement("div",{className:"step-card"},this.renderStep(e.layoutType))}}]),t}(n.Component),pe=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setLanguage:function(t){return e({type:v,payload:t})}}})(me),de=a(490),he=a(91),ge=a.n(he),fe=function(){function e(){return Object(i.a)(this,e),this.screenLeft=void 0,this.screenTop=void 0,this.screenWidth=void 0,this.screenHeight=void 0,this.zoom=void 0,this.screenLeft=window.screenLeft||window.screenX,this.screenTop=window.screenTop||window.screenY,this.screenWidth=window.innerWidth||document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,this.screenHeight=window.innerHeight||document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,this.zoom=this.screenWidth/window.screen.availWidth,this}return Object(c.a)(e,[{key:"getWindow",value:function(e,t,a,n){var r=(this.screenWidth-a)/2/this.zoom+this.screenLeft,o=(this.screenHeight-n)/2/this.zoom+this.screenTop,s="scrollbars=yes, width="+a/this.zoom+", height="+n/this.zoom+", top="+o+", left="+r,i=window.open(e,t,s);window.focus&&i.focus()}}]),e}(),ve=function(e){return fetch("https://core.pancan.org/api/poster/email",{method:"post",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e})},be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={facebook:"https://www.facebook.com/sharer/sharer.php?u=https://www.pancan.org/get-involved/moments-matter/",twitter:"https://twitter.com/intent/tweet/?text="+encodeURIComponent("#MomentsMatter. Join me & @PanCAN in sharing our stories & raising #pancreaticcancer awareness so more patients can have more moments with their loved ones. http://pcan.at/MnM"),instagram:"https://www.instagram.com/pancan/"},a.socialHandler=a.socialHandler.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"socialHandler",value:function(e){(new fe).getWindow(e,"Share Poster Creator",530,400)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"social-button-container"},r.a.createElement(V.a,{circular:!0,color:"facebook",icon:"facebook",onClick:function(){return e.socialHandler(e.state.facebook)}}),r.a.createElement(V.a,{circular:!0,color:"twitter",icon:"twitter",onClick:function(){return e.socialHandler(e.state.twitter)}}),r.a.createElement(V.a,{circular:!0,color:"instagram",icon:"instagram",onClick:function(){return e.socialHandler(e.state.instagram)}}))}}]),t}(n.Component),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isUploaded:!1,posterId:-1,emailInfo:!1,user:{fname:"",lname:"",email:""},error:{error:!1,det:""},elementIds:{1:"preview-square",2:"final-horizontal",3:"final-vertical"}},a.controllers=a.controllers.bind(Object(p.a)(a)),a.downloadPosterImage=a.downloadPosterImage.bind(Object(p.a)(a)),a.shareTwitter=a.shareTwitter.bind(Object(p.a)(a)),a.shareFacebook=a.shareFacebook.bind(Object(p.a)(a)),a.dataURItoBlob=a.dataURItoBlob.bind(Object(p.a)(a)),a.base64ToBlob=a.base64ToBlob.bind(Object(p.a)(a)),a.emailModal=a.emailModal.bind(Object(p.a)(a)),a.formChange=a.formChange.bind(Object(p.a)(a)),a.error=a.error.bind(Object(p.a)(a)),a.sendToEmail=a.sendToEmail.bind(Object(p.a)(a)),a.checkErrors=a.checkErrors.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"downloadPosterImage",value:function(e){var t=this.props.poster,a=this.state.elementIds,n=document.getElementById(a[t.layoutType]);ge()(n).then(function(e){e.toBlob(function(e){console.log(e);var t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="poster.jpeg",a.click()},"image/jpeg",1)})}},{key:"sendToEmail",value:function(){var e=Object(se.a)(oe.a.mark(function e(){var t,a,n,r,o=this;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.poster,a=this.state.elementIds,n=document.getElementById(a[t.layoutType]),r=this.state.isUploaded,this.checkErrors()){e.next=7;break}return e.next=7,ge()(n).then(function(){var e=Object(se.a)(oe.a.mark(function e(t){var a,n,s,i;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.toDataURL("image/jpeg",1),n={key:"5994766c58613900370b6153",image:a,lname:o.state.user.lname,email:o.state.user.email,fname:o.state.user.fname},s=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),r){e.next=8;break}return e.next=6,ve(s);case 6:i=e.sent,o.setState({isUploaded:!0,posterId:i.id,error:{error:!1},emailInfo:!1});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"formChange",value:function(e,t){var a=t.name,n=t.value,r=this.state.user,o=r.fname,s=r.lname,i=r.email;switch(a){case"lname":this.setState({user:{lname:n,fname:o,email:i}});break;case"fname":this.setState({user:{lname:s,fname:n,email:i}});break;case"email":this.setState({user:{lname:s,fname:o,email:n}});break;default:console.log(this.state.user)}}},{key:"error",value:function(){return r.a.createElement("b",{style:{color:"red"}},"Error! make sure to have vaild form values.")}},{key:"checkErrors",value:function(){var e=this.state.user,t=e.lname,a=e.fname,n=e.email;return(""===t||""===a||""===n)&&(this.setState({error:{error:!0}}),!0)}},{key:"emailModal",value:function(){var e=this,t=this.state,a=t.emailInfo,n=t.isUploaded;return r.a.createElement(de.a,{open:a,trigger:r.a.createElement(V.a,{color:"purple",disabled:!!n,content:n?"Email sent!":"Send via Email",onClick:function(){return e.setState(function(e){return{emailInfo:!e.emailInfo}})}}),basic:!0,size:"small"},r.a.createElement(g.a,{icon:"send",content:"Send me my poster"}),r.a.createElement(de.a.Content,null,r.a.createElement("strong",{className:"over-image"},"Your email information:"),r.a.createElement(ae.a,null,r.a.createElement(ae.a.Field,{required:!0},r.a.createElement("label",{style:{color:"#ffffff"}},"First name:"),r.a.createElement(te.a,{placeholder:"First Name",name:"fname",type:"text",onChange:this.formChange})),r.a.createElement(ae.a.Field,{required:!0},r.a.createElement("label",{style:{color:"#ffffff"}},"Last name:"),r.a.createElement(te.a,{placeholder:"Last Name",name:"lname",type:"text",onChange:this.formChange})),r.a.createElement(ae.a.Field,{required:!0},r.a.createElement("label",{style:{color:"#ffffff"}},"Email:"),r.a.createElement(te.a,{name:"email",placeholder:"Email address",type:"email",onChange:this.formChange})))),r.a.createElement(de.a.Actions,null,r.a.createElement(V.a,{color:"red",inverted:!0,onClick:function(){return e.setState(function(e){return{emailInfo:!e.emailInfo}})}},r.a.createElement($.a,{name:"remove"}),"No"),r.a.createElement(V.a,{color:"green",inverted:!0,onClick:this.sendToEmail},r.a.createElement($.a,{name:"mail"}),"Send"),this.state.error.error?this.error():""))}},{key:"shareTwitter",value:function(){var e=this,t=document.getElementById("final-poster"),a=this.state,n=a.isUploaded,r=a.posterId;ge()(t,{scale:2}).then(function(){var t=Object(se.a)(oe.a.mark(function t(a){var o,s,i,c;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.toDataURL("image/png"),s={key:"5994766c58613900370b6153",image:o},n){t.next=10;break}return t.next=5,ve(s);case 5:c=t.sent,e.setState({isUploaded:!0,posterId:c.id}),i="https://twitter.com/intent/tweet/?text="+encodeURIComponent("PanCAN Poster #demandbetter #advocate at http://www.worldpancreaticcancercoalition.org/poster/"+c.id),t.next=11;break;case 10:i="https://twitter.com/intent/tweet/?text="+encodeURIComponent("PanCAN Poster #demandbetter #advocate at http://www.worldpancreaticcancercoalition.org/poster/"+r);case 11:(new fe).getWindow(i,"Share Poster",530,400);case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"shareFacebook",value:function(){var e=this,t=document.getElementById("final-poster"),a=this.state,n=a.isUploaded,r=a.posterId;ge()(t,{scale:2}).then(function(){var t=Object(se.a)(oe.a.mark(function t(a){var o,s,i,c;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.toDataURL("image/png"),i={key:"5994766c58613900370b6153",image:o},n){t.next=10;break}return t.next=5,ve(i);case 5:c=t.sent,e.setState({isUploaded:!0,posterId:c.id}),s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("http://www.worldpancreaticcancercoalition.org/poster/"+c.id),t.next=11;break;case 10:s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("http://www.worldpancreaticcancercoalition.org/poster/"+r);case 11:(new fe).getWindow(s,"Share Poster",530,200);case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/png"})}},{key:"base64ToBlob",value:function(e){var t="";t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:a})}},{key:"controllers",value:function(e){var t=this;switch(e){case 1:case 2:case 3:case 4:return r.a.createElement(z.a,{container:!0,columns:1,stackable:!0},r.a.createElement(z.a.Column,{textAlign:"center"},r.a.createElement(V.a,{content:"Download JPG",className:"gutter-mobile",color:"purple",onClick:function(){return t.downloadPosterImage("image")}})));default:return r.a.createElement("div",null)}}},{key:"render",value:function(){var e=this.props.poster;return r.a.createElement(d.a,{className:"step paddingTop"},r.a.createElement(g.a,{as:"h2",content:"#MomentsMatter",textAlign:"center",className:"poster-h2"}),r.a.createElement("p",{style:{textAlign:"center"},className:"paddingBottom over-solid leadin-copy"},"Share your Moment with the world by downloading your image and sharing it to social media with #MomentsMatter and tagging us @PanCAN."),r.a.createElement(be,null),r.a.createElement("br",null)," ",this.controllers(e.layoutType))}}]),t}(n.Component),ye=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setPoster:function(t){return e({type:j,payload:t})}}})(Ee),we=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={element:HTMLElement},a.stepHandler=a.stepHandler.bind(Object(p.a)(a)),a.stepRender=a.stepRender.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("controller-container-app");this.setState({element:e})}},{key:"stepHandler",value:function(e){(0,this.props.setStep)(e)}},{key:"stepRender",value:function(){var e=this.props.poster.step;switch(this.state.element.scrollTop=0,e){case 1:return r.a.createElement(ee,null);case 2:return r.a.createElement(pe,null);case 3:return r.a.createElement(ye,null)}}},{key:"render",value:function(){var e=this,t=this.props.poster;return r.a.createElement("div",{className:"controller-container",id:"controller-container-app"},r.a.createElement(d.a,null,r.a.createElement(q.a.Group,{fluid:!0,unstackable:!0},r.a.createElement(q.a,{active:1===t.step,onClick:function(){return e.stepHandler(1)},className:"step-button"},r.a.createElement(J.a,{src:"https://0b9aafecab229788ebf1-90f622f94aeb4d165ef7469777c28f31.ssl.cf2.rackcdn.com/poster-creator/NavigationIcons-01.png",size:"mini"}),r.a.createElement(q.a.Content,{className:"step-text"},r.a.createElement(q.a.Title,null,"Start"))),r.a.createElement(q.a,{active:2===t.step,onClick:function(){return e.stepHandler(2)},className:"step-button"},r.a.createElement(J.a,{src:"https://0b9aafecab229788ebf1-90f622f94aeb4d165ef7469777c28f31.ssl.cf2.rackcdn.com/poster-creator/NavigationIcons-02.png",size:"mini"}),r.a.createElement(q.a.Content,{className:"step-text"},r.a.createElement(q.a.Title,null,"Customize"))),r.a.createElement(q.a,{active:3===t.step,onClick:function(){return e.stepHandler(3)},className:"step-button"},r.a.createElement(J.a,{src:"https://0b9aafecab229788ebf1-90f622f94aeb4d165ef7469777c28f31.ssl.cf2.rackcdn.com/poster-creator/NavigationIcons-03.png",size:"mini"}),r.a.createElement(q.a.Content,{className:"step-text"},r.a.createElement(q.a.Title,null,"Save & Share")))),this.stepRender(),r.a.createElement(V.a,{onClick:function(){return e.stepHandler(t.step-1)},className:t.step>1?"back-button show":" hide"},r.a.createElement($.a,{name:"arrow left"}),"\xa0Back"),r.a.createElement(V.a,{className:t.step<3?"next-button show":" hide",onClick:function(){return e.stepHandler(t.step+1)}},"Next\xa0",r.a.createElement($.a,{name:"arrow right"}))))}}]),t}(n.Component),Oe=Object(h.b)(function(e){return{poster:e.rootReducer.poster}},function(e){return{setStep:function(t){return e({type:O,payload:t})}}})(we),ke=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(z.a,{container:!0,columns:"equal",divided:!0,stackable:!0},r.a.createElement(z.a.Column,{mobile:16,tablet:16,computer:16,largeScreen:10},r.a.createElement(Oe,null)),r.a.createElement(z.a.Column,{mobile:16,tablet:16,computer:16,largeScreen:6,className:"purple-gradient-bck",style:{paddingTop:25,display:"flex",alignItems:"center",minHeight:"100%"}},r.a.createElement(F,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=a(266),Se=a(41),Ie=a(35),xe=a(39),Ce=Object(Se.combineReducers)({poster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:1,type:"poster message only",layoutType:1,language:"english",message:"",createdDate:Date(),shareNetwork:"",theme:"pancan-purple",image:"",logo:"https://www.pancan.org//wp-content/uploads/2018/05/pancan-logo.png",posterImage:{},scale:1,title:"",positionX:0,positionY:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LAYOUT_SET":case"STEP_SET":case"LANGUAGE_SET":case"THEME_SET":case"MESSAGE_SET":case"LOGO_SET":case"IMAGE_SET":case"POSTER_CREATE_SUCCESS":case"SCALE_SET":case"TITLE_SET":case"IMAGE_POSITION_SET":return Object(xe.a)({},e,t.payload);default:return e}}}),Te=a(24),Le=oe.a.mark(Ge),Ne=oe.a.mark(De),Me=oe.a.mark(Xe),Ue=oe.a.mark(Fe),Ae=oe.a.mark(qe),He=oe.a.mark(Je),Pe=oe.a.mark(Ve),Re=oe.a.mark($e),Be=oe.a.mark(Ke),_e=oe.a.mark(Qe),ze=oe.a.mark(Ze),We=oe.a.mark(et),Ye=oe.a.mark(tt);function Ge(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.c)(f,De);case 2:return e.next=4,Object(Te.c)(v,Xe);case 4:return e.next=6,Object(Te.c)(O,Fe);case 6:return e.next=8,Object(Te.c)(k,qe);case 8:return e.next=10,Object(Te.c)(y,Je);case 10:return e.next=12,Object(Te.c)(b,Ve);case 12:return e.next=14,Object(Te.c)(E,$e);case 14:return e.next=16,Object(Te.c)(j,Ke);case 16:return e.next=18,Object(Te.c)(S,Qe);case 18:return e.next=20,Object(Te.c)(w,Ze);case 20:return e.next=22,Object(Te.c)(I,et);case 22:case"end":return e.stop()}},Le)}function De(e){var t;return oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.payload,a.next="poster message only"===a.t0?3:"poster message and image"===a.t0?5:"post message only"===a.t0?7:"post image"===a.t0?9:11;break;case 3:return t={type:"poster message only",layoutType:1},a.abrupt("break",11);case 5:return t={type:"poster message and image",layoutType:2},a.abrupt("break",11);case 7:return t={type:"post message only",layoutType:3},a.abrupt("break",11);case 9:return t={type:"post image",layoutType:4},a.abrupt("break",11);case 11:return a.next=13,Object(Te.b)(x(t));case 13:case"end":return a.stop()}},Ne)}function Xe(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(C(e.payload));case 2:case"end":return t.stop()}},Me)}function Fe(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(T(e.payload));case 2:case"end":return t.stop()}},Ue)}function qe(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(L(e.payload));case 2:case"end":return t.stop()}},Ae)}function Je(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(U(e.payload));case 2:case"end":return t.stop()}},He)}function Ve(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(N(e.path));case 2:case"end":return t.stop()}},Pe)}function $e(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(M(e.path));case 2:case"end":return t.stop()}},Re)}function Ke(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(A(e.payload));case 2:case"end":return t.stop()}},Be)}function Qe(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(H(e.payload));case 2:case"end":return t.stop()}},_e)}function Ze(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(P(e.payload));case 2:case"end":return t.stop()}},ze)}function et(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Te.b)(R(e.payload.x,e.payload.y));case 2:case"end":return t.stop()}},We)}function tt(){var e;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[Ge()],t.next=3,Object(Te.a)(e);case 3:case"end":return t.stop()}},Ye)}var at=Object(je.composeWithDevTools)({}),nt=Object(Ie.a)(),rt=[nt],ot=at(Se.applyMiddleware.apply(void 0,rt)),st=Object(Se.combineReducers)({rootReducer:Ce}),it=Object(Se.createStore)(st,ot);nt.run(tt);a(475);s.a.render(r.a.createElement(h.a,{store:it},r.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},370:function(e,t,a){},375:function(e,t,a){},475:function(e,t,a){}},[[277,2,1]]]);
//# sourceMappingURL=main.d0130ddf.chunk.js.map